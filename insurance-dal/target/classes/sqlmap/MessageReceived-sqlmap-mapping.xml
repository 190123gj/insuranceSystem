<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>specialmer-dalgen</tt>, a DAL (Data Access Layer)  -->
<!-- code generation utility specially developed for <tt>rent</tt> project.     -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>specialmer-dalgen</tt> to generate this file.                                -->
<!--                                                                               -->
<!-- @author peigen                                                             -->
<!-- ============================================================================= -->

<sqlMap namespace="specialmer">
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->

    <!-- result maps for database table message_received -->
    <resultMap id="RM-MESSAGE-RECEIVED" class="com.born.insurance.dal.dataobject.MessageReceivedDO">
        <result property="receivedId" column="received_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="messageId" column="message_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="messageTitle" column="message_title" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="messageType" column="message_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="messageSubject" column="message_subject" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="messageContent" column="message_content" javaType="java.lang.String" jdbcType="LONGTEXT"/>
        <result property="notificationObject" column="notification_object" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="viewType" column="view_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="linkUrl" column="link_url" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="messageSenderId" column="message_sender_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="messageSenderName" column="message_sender_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="messageReceivedId" column="message_received_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="messageReceivedDate" column="message_received_date" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="messageReceivedName" column="message_received_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="messageReceivedAccount" column="message_received_account" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="messageReceivedStatus" column="message_received_status" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>


    <!-- ============================================= -->
    <!-- mapped statements for IbatisMessageReceivedDAO -->
    <!-- ============================================= -->
    <!-- mapped statement for IbatisMessageReceivedDAO.insert -->
    <insert id="MS-MESSAGE-RECEIVED-INSERT">
        insert /*MS-YRD-MESSAGE-RECEIVED-INSERT*/ /*MS-YRD-MESSAGE-RECEIVED-INSERT*/ into message_received(received_id,message_id,message_title,message_type,message_subject,message_content,notification_object,view_type,link_url,message_received_date,message_sender_id,message_sender_name,message_received_name,message_received_id,message_received_status,message_received_account,raw_add_time) values (#receivedId#, #messageId#, #messageTitle#, #messageType#, #messageSubject#, #messageContent#, #notificationObject#, #viewType#, #linkUrl#, #messageReceivedDate#, #messageSenderId#,#messageSenderName#,#messageReceivedName#, #messageReceivedId#, #messageReceivedStatus#,#messageReceivedAccount#,#rawAddTime#)
			 <selectKey  resultClass ="long"  keyProperty ="receivedId" >   
	          		 SELECT LAST_INSERT_ID() AS ID 
	      	</selectKey>
    </insert>

    <!-- mapped statement for IbatisMessageReceivedDAO.update -->
    <update id="MS-MESSAGE-RECEIVED-UPDATE">
    <![CDATA[
        update /*MS-YRD-MESSAGE-RECEIVED-UPDATE*/ message_received set message_id=#messageId#, message_title=#messageTitle#, message_type=#messageType#, message_subject=#messageSubject#, message_content=#messageContent#, notification_object=#notificationObject#, view_type=#viewType#, link_url=#linkUrl#, message_received_date=#messageReceivedDate#, message_sender_id=#messageSenderId#, message_sender_name=#messageSenderName#, message_received_name=#messageReceivedName#, message_received_id=#messageReceivedId#, message_received_status=#messageReceivedStatus#, message_received_account=#messageReceivedAccount# where (received_id = #receivedId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisMessageReceivedDAO.updateStatus -->
    <update id="MS-MESSAGE-RECEIVED-UPDATE-STATUS">
    <![CDATA[
        update /*MS-YRD-MESSAGE-RECEIVED-UPDATE-STATUS*/ message_received set message_received_status=#messageReceivedStatus# where (message_received_id = #messageReceivedId#)
    ]]>
    </update>

    <!-- mapped statement for IbatisMessageReceivedDAO.findById -->
    <select id="MS-MESSAGE-RECEIVED-FIND-BY-ID" resultMap="RM-MESSAGE-RECEIVED">
    <![CDATA[
        select /*MS-YRD-MESSAGE-RECEIVED-FIND-BY-ID*/ * from message_received where (received_id = #value#)
    ]]>
    </select>

    <!-- mapped statement for IbatisMessageReceivedDAO.deleteById -->
    <delete id="MS-MESSAGE-RECEIVED-DELETE-BY-ID">
    <![CDATA[
        delete /*MS-YRD-MESSAGE-RECEIVED-DELETE-BY-ID*/ from message_received where (received_id = #value#)
    ]]>
    </delete>

    <!-- mapped statement for IbatisMessageReceivedDAO.findByCondition -->
    <select id="MS-MESSAGE-RECEIVED-FIND-BY-CONDITION" resultMap="RM-MESSAGE-RECEIVED">
        SELECT /*MS-YRD-MESSAGE-RECEIVED-FIND-BY-CONDITION*/  *  FROM message_received
		WHERE 1=1
		<dynamic>
			<isGreaterThan property="messageReceived.messageId" compareValue="0" prepend=" and ">
				message_id = #messageReceived.messageId#
			</isGreaterThan>
			<isGreaterThan property="messageReceived.messageSenderId" compareValue="0" prepend=" and ">
				message_sender_id = #messageReceived.messageSenderId#
			</isGreaterThan>
			<isGreaterThan property="messageReceived.messageReceivedId" compareValue="0" prepend=" and ">
				message_received_id = #messageReceived.messageReceivedId#
			</isGreaterThan>
			<isNotEmpty property="messageReceived.messageReceivedName" prepend=" and ">
				message_received_name = #messageReceived.messageReceivedName#
			</isNotEmpty>
			<isNotEmpty property="messageReceived.messageReceivedAccount" prepend=" and ">
				message_received_account = #messageReceived.messageReceivedAccount#
			</isNotEmpty>
			<isNotEmpty property="messageReceived.messageContent" prepend=" and ">
				message_content like concat('%',#messageReceived.messageContent#,'%')
			</isNotEmpty>				
			<isNotEmpty property="messageReceived.viewType" prepend=" and ">
				view_type = #messageReceived.viewType#
			</isNotEmpty>
			<isNotEmpty property="beginReceivedDate" prepend=" and ">
				 <![CDATA[	message_received_date >= #beginReceivedDate#  ]]>
			</isNotEmpty>
			<isNotEmpty property="endReceivedDate" prepend=" and ">
				 <![CDATA[	message_received_date <= #endReceivedDate#  ]]>
			</isNotEmpty>
			
			<isNotEmpty property="messageReceived.messageType" prepend=" and ">
				message_type = #messageReceived.messageType#
			</isNotEmpty>
			<isNotEmpty property="statusList" prepend=" and ">
				message_received_status in
				<iterate property="statusList" open="(" close=")" conjunction=",">
					#statusList[]#
				</iterate>
			</isNotEmpty>
		</dynamic>
	    <isEmpty property="sortCol" prepend=" order by ">
	    	message_received_status DESC ,raw_add_time desc
	    </isEmpty>		
		<isNotEmpty property="sortCol" prepend=" order by ">
	         $sortCol$
	     	<isNotEmpty property="sortOrder">
            	 $sortOrder$
        	</isNotEmpty>
	    </isNotEmpty>
		 LIMIT #limitStart#,#pageSize#;
    </select>

    <!-- mapped statement for IbatisMessageReceivedDAO.findCountByCondition -->
    <select id="MS-MESSAGE-RECEIVED-FIND-COUNT-BY-CONDITION" resultClass="long">
        SELECT /*MS-YRD-MESSAGE-RECEIVED-FIND-COUNT-BY-CONDITION*/  count(*)  FROM message_received
		WHERE 1=1
		<dynamic>
			<isGreaterThan property="messageReceived.messageId" compareValue="0" prepend=" and ">
				message_id = #messageReceived.messageId#
			</isGreaterThan>
			<isGreaterThan property="messageReceived.messageSenderId" compareValue="0" prepend=" and ">
				message_sender_id = #messageReceived.messageSenderId#
			</isGreaterThan>
			<isGreaterThan property="messageReceived.messageReceivedId" compareValue="0" prepend=" and ">
				message_received_id = #messageReceived.messageReceivedId#
			</isGreaterThan>
			<isNotEmpty property="messageReceived.messageReceivedName" prepend=" and ">
				message_received_name = #messageReceived.messageReceivedName#
			</isNotEmpty>
			<isNotEmpty property="messageReceived.messageReceivedAccount" prepend=" and ">
				message_received_account = #messageReceived.messageReceivedAccount#
			</isNotEmpty>			
			<isNotEmpty property="messageReceived.messageContent" prepend=" and ">
				message_content like concat('%',#messageReceived.messageContent#,'%')
			</isNotEmpty>			
			<isNotEmpty property="messageReceived.viewType" prepend=" and ">
				view_type = #messageReceived.viewType#
			</isNotEmpty>
			<isNotEmpty property="beginReceivedDate" prepend=" and ">
				 <![CDATA[	message_received_date >= #beginReceivedDate#  ]]>
			</isNotEmpty>
			<isNotEmpty property="endReceivedDate" prepend=" and ">
				 <![CDATA[	message_received_date <= #endReceivedDate#  ]]>
			</isNotEmpty>
			
			<isNotEmpty property="messageReceived.messageType" prepend=" and ">
				message_type = #messageReceived.messageType#
			</isNotEmpty>
			<isNotEmpty property="statusList" prepend=" and ">
				message_received_status in
				<iterate property="statusList" open="(" close=")" conjunction=",">
					#statusList[]#
				</iterate>
			</isNotEmpty>
		</dynamic>
    </select>

</sqlMap>
