<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>specialmer-dalgen</tt>, a DAL (Data Access Layer)  -->
<!-- code generation utility specially developed for <tt>rent</tt> project.     -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>specialmer-dalgen</tt> to generate this file.                                -->
<!--                                                                               -->
<!-- @author peigen                                                             -->
<!-- ============================================================================= -->

<sqlMap namespace="specialmer">
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->

    <!-- result maps for database table operation_journal -->
    <resultMap id="RM-OPERATION-JOURNAL" class="com.born.insurance.dataobject.OperationJournalDO">
        <result property="identity" column="identity" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="baseModuleName" column="base_module_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="permissionName" column="permission_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="operationContent" column="operation_content" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="memo" column="memo" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="operatorId" column="operator_id" javaType="long" jdbcType="BIGINT" nullValue="0"/>
        <result property="operatorName" column="operator_name" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="operatorIp" column="operator_ip" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="rawAddTime" column="raw_add_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
        <result property="rawUpdateTime" column="raw_update_time" javaType="java.util.Date" jdbcType="TIMESTAMP"/>
    </resultMap>


    <!-- ============================================= -->
    <!-- mapped statements for IbatisOperationJournalDAO -->
    <!-- ============================================= -->
    <!-- mapped statement for IbatisOperationJournalDAO.insert -->
    <insert id="MS-OPERATION-JOURNAL-INSERT">
        INSERT /*MS-YRD-OPERATION-JOURNAL-INSERT*/ INTO operation_journal
			(	
			base_module_name,
			permission_name,
			operation_content,
			memo,
			operator_id,
			operator_name,
			operator_ip,
			raw_add_time
				)
	        VALUES(
	            #baseModuleName# ,
	            #permissionName# ,
	            #operationContent# ,
	            #memo# ,
	            #operatorId# ,
	            #operatorName# ,
	            #operatorIp# ,
	            #rawAddTime#
	        );
	        <selectKey  resultClass ="long"  keyProperty ="identity" >   
	          		 SELECT LAST_INSERT_ID() AS ID 
	      	</selectKey>
    </insert>

    <!-- mapped statement for IbatisOperationJournalDAO.update -->
    <update id="MS-OPERATION-JOURNAL-UPDATE">
        UPDATE /*MS-YRD-OPERATION-JOURNAL-UPDATE*/ operation_journal
	            <dynamic prepend="set"> 
	            	<isNotEmpty property="baseModuleName" prepend=",">
                        base_module_name = #baseModuleName#
                    </isNotEmpty>
                    <isNotEmpty property="permissionName" prepend=",">
                        permission_name = #permissionName#
                    </isNotEmpty>
                    <isNotEmpty property="operationContent" prepend=",">
                        operation_content = #operationContent#
                    </isNotEmpty>
                    <isGreaterThan property="operatorId" prepend="," compareValue="0">
                        operator_id = #operatorId#
                    </isGreaterThan>
                    <isNotEmpty property="operatorName" prepend=",">
                        operator_name = #operatorName#
                    </isNotEmpty>
                    <isNotEmpty property="operatorIp" prepend=",">
                        operator_ip = #operatorIp#
                    </isNotEmpty>
                    <isNotEmpty property="memo" prepend=",">
                        memo = #memo#
                    </isNotEmpty>
                </dynamic>
                WHERE identity=#identity#
    </update>

    <!-- mapped statement for IbatisOperationJournalDAO.findByIdentity  -->
    <select id="MS-OPERATION-JOURNAL-FIND-BY-IDENTITY" resultMap="RM-OPERATION-JOURNAL">
    <![CDATA[
        select /*MS-YRD-OPERATION-JOURNAL-FIND-BY-IDENTITY*/ identity, base_module_name, permission_name, operation_content, memo, operator_id, operator_name, operator_ip, raw_add_time, raw_update_time from operation_journal where (identity = #value#)
    ]]>
    </select>

    <!-- mapped statement for IbatisOperationJournalDAO.queryOperationJournalPageList -->
    <select id="MS-OPERATION-JOURNAL-QUERY-OPERATION-JOURNAL-PAGE-LIST" resultMap="RM-OPERATION-JOURNAL">
        select /*MS-YRD-OPERATION-JOURNAL-QUERY-OPERATION-JOURNAL-PAGE-LIST*/ 
				identity,
				base_module_name,
				permission_name,
				operation_content,
				memo,
				operator_id,
				operator_name,
				operator_ip,
				raw_add_time,
				raw_update_time
				from operation_journal 
					<dynamic prepend="where">
						<isNotEmpty property="operationJournal.baseModuleName" prepend=" and ">
                        base_module_name = #operationJournal.baseModuleName#
                    	</isNotEmpty>
                    	<isNotEmpty property="operationJournal.permissionName" prepend=" and ">
                        permission_name = #operationJournal.permissionName#
                    	</isNotEmpty>
						<isNotEmpty property="operationJournal.operationContent" prepend="and">
                        operation_content = #operationJournal.operationContent#
                    	</isNotEmpty>
						<isGreaterThan property="operationJournal.operatorId" prepend=" and " compareValue="0">
                        operator_id = #operationJournal.operatorId#
                    	</isGreaterThan>
                    	<isNotEmpty property="operationJournal.operatorName" prepend=" and ">
                        operator_name = #operationJournal.operatorName#
                    	</isNotEmpty>
                    	<isNotEmpty property="operationJournal.operatorIp" prepend=" and ">
                        operator_ip = #operationJournal.operatorIp#
                    	</isNotEmpty>
                    	<isNotEmpty property="operationJournal.memo" prepend=" and ">
                        memo like CONCAT('%',#operationJournal.memo#,'%')
                    	</isNotEmpty>
						<isNotEmpty property="operatorTimeStart" prepend=" and ">
			                <![CDATA[
	                       		raw_add_time >= #operatorTimeStart# 
	                   		]]>
			            </isNotEmpty>
			            <isNotEmpty property="operatorTimeEnd" prepend=" and ">
			                <![CDATA[
	                       		raw_add_time <= #operatorTimeEnd# 
	                   		]]>
			            </isNotEmpty>
					</dynamic>
					order by raw_update_time desc 
			        LIMIT #limitStart#,#pageSize#;
    </select>

    <!-- mapped statement for IbatisOperationJournalDAO.queryOperationJournalPageListCount -->
    <select id="MS-OPERATION-JOURNAL-QUERY-OPERATION-JOURNAL-PAGE-LIST-COUNT" resultClass="long">
        select /*MS-YRD-OPERATION-JOURNAL-QUERY-OPERATION-JOURNAL-PAGE-LIST-COUNT*/ 
				count(identity)
				from operation_journal
					<dynamic prepend="where">
						<isNotEmpty property="operationJournal.baseModuleName" prepend=" and ">
                        base_module_name = #operationJournal.baseModuleName#
                    	</isNotEmpty>
                    	<isNotEmpty property="operationJournal.permissionName" prepend=" and ">
                        permission_name = #operationJournal.permissionName#
                    	</isNotEmpty>
						<isGreaterThan property="operationJournal.operatorId" prepend=" and " compareValue="0">
                        operator_id = #operationJournal.operatorId#
                       </isGreaterThan>
                    	<isNotEmpty property="operationJournal.operationContent" prepend="and">
                        operation_content = #operationJournal.operationContent#
                    	</isNotEmpty>

                    	<isNotEmpty property="operationJournal.operatorName" prepend=" and ">
                        operator_name = #operationJournal.operatorName#
                    	</isNotEmpty>
                    	<isNotEmpty property="operationJournal.operatorIp" prepend=" and ">
                        operator_ip = #operationJournal.operatorIp#
                    	</isNotEmpty>
                    	<isNotEmpty property="operationJournal.memo" prepend=" and ">
                        memo like CONCAT('%',#operationJournal.memo#,'%')
                    	</isNotEmpty>
						<isNotEmpty property="operatorTimeStart" prepend=" and ">
			                <![CDATA[
	                       		raw_add_time >= #operatorTimeStart# 
	                   		]]>
			            </isNotEmpty>
			            <isNotEmpty property="operatorTimeEnd" prepend=" and ">
			                <![CDATA[
	                       		raw_add_time <= #operatorTimeEnd# 
	                   		]]>
			            </isNotEmpty>
					</dynamic>
					order by raw_update_time desc
    </select>

</sqlMap>
